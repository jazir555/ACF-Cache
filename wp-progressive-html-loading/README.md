=== LHA Progressive HTML Loading ===
Contributors: Jules
Tags: performance, ttfb, html streaming, progressive loading, optimization, speed
Requires at least: 5.0
Tested up to: 6.5
Stable tag: 0.1.0
License: GPLv2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html

Optimizes Time To First Byte (TTFB) and perceived performance by progressively streaming HTML content to the browser, similar to how progressive images load.

== Description ==

LHA Progressive HTML Loading is a WordPress plugin designed to improve your website's perceived loading speed and Time To First Byte (TTFB). It works by sending your website's HTML to the visitor's browser in chunks, rather than waiting for the entire page to be generated by PHP. This means the browser can start rendering the page sooner, providing a faster experience for your users.

**How it Works:**

The plugin utilizes PHP's output buffering capabilities. When active, it captures the HTML generated by WordPress. It then looks for a specific HTML comment marker (default: `<!-- LHA_FLUSH_NOW -->`) that you can place in your theme's template files. When this marker is encountered in the output, the plugin flushes the buffered HTML up to that point to the browser. This allows critical parts of your page (like the header, CSS, or early content) to be sent and rendered before the entire page generation is complete.

**Key Features:**

*   **Improved Perceived Performance:** Users see content appearing on the page more quickly.
*   **Reduced Time To First Byte (TTFB):** The initial part of the HTML is sent sooner.
*   **Easy Mode:** Simple On/Off toggle and preset configurations for quick setup.
*   **Advanced Mode:** Fine-grained control over streaming behavior:
    *   Customize the HTML flush marker/comment.
    *   Enable or disable streaming for specific post types.
    *   Exclude specific user roles from experiencing HTML streaming.
    *   Exclude specific URLs or page slugs.
*   **Lightweight:** Designed to be efficient and have minimal impact on server resources.

== Installation ==

1.  Upload the `wp-progressive-html-loading` folder to the `/wp-content/plugins/` directory.
2.  Activate the plugin through the 'Plugins' menu in WordPress.
3.  Navigate to **Settings > Progressive HTML** to configure the plugin.

== Configuration ==

You can configure LHA Progressive HTML Loading via the WordPress admin dashboard.

1.  **Access Settings:** Go to **Settings > Progressive HTML**.
2.  **Mode Selection:**
    *   **Easy Mode:** Provides a simple way to enable or disable streaming.
        *   **Enable Streaming (Easy):** A master switch for easy mode.
        *   **Streaming Preset:**
            *   *Basic (Recommended):* Flushes the HTML output whenever the defined flush marker is found in the HTML. This is the standard and recommended way to use the plugin.
            *   *Aggressive (Placeholder):* Currently behaves the same as "Basic". Future versions might include more aggressive flushing strategies.
    *   **Advanced Mode:** Offers detailed control over the streaming process.
        *   **Enable Streaming (Advanced):** A master switch for advanced mode. When this is enabled, Easy Mode settings are ignored.
        *   **Flush Comment/Marker:** Define the HTML comment that triggers a flush. The default is `<!-- LHA_FLUSH_NOW -->`. You can place this comment in your theme template files (e.g., in `header.php` after the `<head>` section, or between major content sections in `index.php`, `page.php`, etc.).
        *   **Enable on Post Types:** Select the specific post types (e.g., posts, pages, custom post types) where HTML streaming should be active.
        *   **Exclude User Roles:** Select user roles for whom HTML streaming will be disabled. Useful for testing or if logged-in users with specific roles should receive pages normally.
        *   **Exclude URLs/Slugs:** Enter a list of URL paths or slugs (one per line, e.g., `/about-us/`, `/contact`) where streaming should be disabled.

== Frequently Asked Questions ==

*   **Q: How can I tell if it's working?**
    *   A: You might observe your page content rendering in stages in your browser. Advanced users can use browser developer tools (Network tab); the initial HTML document request might still show a full load time for the first chunk, but content should appear sooner, and subsequent parts of the page might appear as separate data chunks over the same request. The key is perceived performance. You can also place the flush marker (e.g., `<!-- LHA_FLUSH_NOW -->`) strategically in your theme files (like after the `<head>` tag, or after major content blocks) and observe if content before the marker appears before the full page loads.

*   **Q: Will this conflict with caching plugins?**
    *   A: It can. If you use full-page caching (HTML caching), the page is served as a static file, and HTML streaming won't occur for cached pages because PHP isn't dynamically generating them. This plugin is most effective when PHP is generating the page. Some caching plugins might have options to disable caching for specific pages or use different caching methods (like object caching or browser caching) that could be compatible. Always test thoroughly with your specific caching setup. Streaming is generally incompatible with systems that modify the entire HTML output after it's generated (e.g. some auto-optimization services for HTML minification).

*   **Q: Is it compatible with X theme/plugin?**
    *   A: LHA Progressive HTML Loading is designed to be compatible with most WordPress themes and plugins. However, due to the diverse nature of WordPress environments, conflicts can occasionally arise, especially with plugins that also manipulate output buffering extensively or modify HTML content in a way that interferes with the flush markers. We recommend testing on a staging site first.

== Screenshots ==

1.  The "Easy Mode" settings tab.
2.  The "Advanced Mode" settings tab showing various configuration options.

== Changelog ==

= 0.1.0 =
* Initial release.
